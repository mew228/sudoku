{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/Cell.tsx"],"sourcesContent":["import { memo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\nimport { useGameStore } from '@/lib/store';\r\nimport { useShallow } from 'zustand/react/shallow';\r\n\r\ninterface CellProps {\r\n    r: number;\r\n    c: number;\r\n    val: number;\r\n    initial: boolean;\r\n}\r\n\r\nexport const Cell = memo(({ r, c, val, initial }: CellProps) => {\r\n\r\n\r\n    // Optimizing selectors to avoid re-renders on timer tick\r\n    const isSelected = useGameStore(useShallow(state => state.selectedCell?.r === r && state.selectedCell?.c === c));\r\n\r\n    // Check for related cells (same row, col, or box)\r\n    const isRelated = useGameStore(useShallow(state => {\r\n        const s = state.selectedCell;\r\n        if (!s) return false;\r\n        if (s.r === r || s.c === c) return true;\r\n        if (Math.floor(s.r / 3) === Math.floor(r / 3) && Math.floor(s.c / 3) === Math.floor(c / 3)) return true;\r\n        return false;\r\n    }));\r\n\r\n    const isSameValue = useGameStore(useShallow(state => {\r\n        const s = state.selectedCell;\r\n        if (!s) return false;\r\n        const sVal = state.board[s.r][s.c];\r\n        return sVal !== 0 && sVal === val;\r\n    }));\r\n\r\n    const isError = useGameStore(state => !initial && val !== 0 && val !== state.solvedBoard[r][c]);\r\n\r\n    // Hint glow â€” true when this cell was just revealed by a hint\r\n    const isHinted = useGameStore(state => state.lastHint?.r === r && state.lastHint?.c === c);\r\n\r\n    // Hover state from drag and drop\r\n    const isHovered = useGameStore(useShallow(state => state.hoveredCell?.r === r && state.hoveredCell?.c === c));\r\n\r\n    // Notes logic - purely selector based\r\n    const cellNotes = useGameStore(useShallow(state => {\r\n        if (val !== 0) return [];\r\n        const notes = [];\r\n        for (let n = 1; n <= 9; n++) {\r\n            if (state.notes.has(`${r},${c},${n}`)) notes.push(n);\r\n        }\r\n        return notes;\r\n    }));\r\n\r\n    const selectCell = useGameStore(state => state.selectCell);\r\n\r\n    const handleClick = () => selectCell(r, c);\r\n\r\n    // HTML5 DnD handlers removed in favor of Framer Motion gesture handling in Numpad.tsx\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            data-cell-row={r}\r\n            data-cell-col={c}\r\n            // onDragOver={handleDragOver} // Removed\r\n            // onDragLeave={handleDragLeave} // Removed\r\n            // onDrop={handleDrop} // Removed\r\n            className={cn(\r\n                \"relative flex items-center justify-center w-full h-full cursor-pointer transition-colors duration-200\",\r\n                \"text-lg sm:text-xl md:text-2xl lg:text-3xl font-light select-none\",\r\n                // Base Border\r\n                \"border-[0.5px] border-slate-300\",\r\n\r\n                // Thick 3x3 Borders\r\n                // Right border for columns 2 and 5 (0-indexed indices 2 and 5)\r\n                (c === 2 || c === 5) && \"!border-r-2 !border-r-slate-800\",\r\n                // Bottom border for rows 2 and 5\r\n                (r === 2 || r === 5) && \"!border-b-2 !border-b-slate-800\",\r\n\r\n                // Remove outer borders (handled by board container)\r\n                c === 8 && \"border-r-0\",\r\n                r === 8 && \"border-b-0\",\r\n\r\n                // Backgrounds & Text Colors\r\n                isError\r\n                    ? (isSelected ? \"bg-red-600 text-white\" : \"bg-red-100 text-red-600\")\r\n                    : isSelected\r\n                        ? \"bg-indigo-600 text-white\"\r\n                        : isSameValue // isDragOver removed or replaced with compatible visual state if needed later\r\n                            ? \"bg-indigo-100 text-indigo-900\"\r\n                            : isRelated\r\n                                ? \"bg-slate-100\"\r\n                                : \"bg-white hover:bg-slate-50\",\r\n\r\n                // Hint Golden Glow (layered on top)\r\n                isHinted && !isSelected && !isError && \"ring-2 ring-amber-400 bg-amber-50 z-20\",\r\n\r\n                // Hover Highlight (Drag & Drop)\r\n                isHovered && !isSelected && !isError && \"bg-indigo-200 ring-2 ring-inset ring-indigo-500 z-30\",\r\n\r\n                // Dynamic Borders (Override structural borders)\r\n                isSelected && !isError && \"!border-indigo-600 z-10\",\r\n                isSelected && isError && \"!border-red-600 z-10\",\r\n                !isSelected && isError && \"!border-red-200\",\r\n\r\n\r\n                // Text Color Overrides\r\n                initial && !isSelected && \"text-slate-900 font-medium\",\r\n\r\n            )}\r\n        >\r\n            {val !== 0 ? (\r\n                <motion.span\r\n                    // Add a nice \"pop\" effect when value changes via drop\r\n                    key={val}\r\n                    initial={{ scale: 0.5, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n                    className={cn(\"z-10\", isError && \"animate-shake\")}\r\n                >\r\n                    {val}\r\n                </motion.span>\r\n            ) : (\r\n                <div className=\"grid grid-cols-3 w-full h-full p-0.5 pointer-events-none\">\r\n                    {[1, 2, 3, 4, 5, 6, 7, 8, 9].map(n => (\r\n                        <div key={n} className=\"flex items-center justify-center\">\r\n                            {cellNotes.includes(n) && (\r\n                                <span className=\"text-[9px] text-slate-500 font-medium leading-none\">\r\n                                    {n}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nCell.displayName = 'Cell';\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/Board.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { Cell } from './Cell';\r\nimport { useGameStore } from '@/lib/store';\r\nimport { motion } from 'framer-motion';\r\n\r\nexport const Board = () => {\r\n    // Simplified selectors\r\n    const board = useGameStore(state => state.board);\r\n    const initialBoard = useGameStore(state => state.initialBoard);\r\n    const startGame = useGameStore(state => state.startGame);\r\n\r\n    useEffect(() => {\r\n        // Start game on mount if empty\r\n        if (board.length === 0) {\r\n            startGame('Medium');\r\n        }\r\n    }, [board.length, startGame]);\r\n\r\n    if (board.length === 0) return null;\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            className=\"w-full max-w-xl aspect-square bg-slate-800 p-1 rounded-sm shadow-2xl overflow-hidden\"\r\n        >\r\n            {/* \r\n                Changed from gap-based grid to border-based grid for better control over line thickness.\r\n                Background is slate-800 to form the thick outer border.\r\n                Cells handle their own inner borders.\r\n            */}\r\n            <div className=\"grid grid-cols-9 grid-rows-9 h-full w-full bg-white touch-manipulation\">\r\n                {board.map((row, r) => (\r\n                    row.map((val, c) => (\r\n                        <Cell\r\n                            key={`${r}-${c}`}\r\n                            r={r}\r\n                            c={c}\r\n                            val={val}\r\n                            initial={initialBoard[r][c] !== 0}\r\n                        />\r\n                    ))\r\n                ))}\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,QAAQ;;IACjB,uBAAuB;IACvB,MAAM,QAAQ,IAAA,+HAAY;qCAAC,CAAA,QAAS,MAAM,KAAK;;IAC/C,MAAM,eAAe,IAAA,+HAAY;4CAAC,CAAA,QAAS,MAAM,YAAY;;IAC7D,MAAM,YAAY,IAAA,+HAAY;yCAAC,CAAA,QAAS,MAAM,SAAS;;IAEvD,IAAA,0KAAS;2BAAC;YACN,+BAA+B;YAC/B,IAAI,MAAM,MAAM,KAAK,GAAG;gBACpB,UAAU;YACd;QACJ;0BAAG;QAAC,MAAM,MAAM;QAAE;KAAU;IAE5B,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO;IAE/B,qBACI,6LAAC,uMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,OAAO;QAAI;QAClC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAE;QAChC,WAAU;kBAOV,cAAA,6LAAC;YAAI,WAAU;sBACV,MAAM,GAAG,CAAC,CAAC,KAAK,IACb,IAAI,GAAG,CAAC,CAAC,KAAK,kBACV,6LAAC,sIAAI;wBAED,GAAG;wBACH,GAAG;wBACH,KAAK;wBACL,SAAS,YAAY,CAAC,EAAE,CAAC,EAAE,KAAK;uBAJ3B,GAAG,EAAE,CAAC,EAAE,GAAG;;;;;;;;;;;;;;;AAW5C;GAzCa;;QAEK,+HAAY;QACL,+HAAY;QACf,+HAAY;;;KAJrB"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/GameControls.tsx"],"sourcesContent":["import { useGameStore } from \"@/lib/store\";\r\nimport { Eraser, Pencil, RotateCcw, Lightbulb } from 'lucide-react';\r\nimport { cn } from \"@/lib/utils\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport const GameControls = () => {\r\n    const undo = useGameStore(state => state.undo);\r\n\r\n    const toggleNotesMode = useGameStore(state => state.toggleNotesMode);\r\n    const isNotesMode = useGameStore(state => state.isNotesMode);\r\n    const setCellValue = useGameStore(state => state.setCellValue);\r\n    const getHint = useGameStore(state => state.getHint);\r\n    const hintsRemaining = useGameStore(state => state.hintsRemaining);\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"flex justify-between w-full px-2\">\r\n            <ControlBtn\r\n                icon={<RotateCcw size={22} />}\r\n                label=\"Undo\"\r\n                onClick={undo}\r\n            />\r\n            <ControlBtn\r\n                icon={<Eraser size={22} />}\r\n                label=\"Erase\"\r\n                onClick={() => setCellValue(0)}\r\n            />\r\n            <ControlBtn\r\n                icon={<Pencil size={22} />}\r\n                label=\"Notes\"\r\n                isActive={isNotesMode}\r\n                onClick={toggleNotesMode}\r\n                badge={isNotesMode ? \"ON\" : \"OFF\"}\r\n            />\r\n            <ControlBtn\r\n                icon={<Lightbulb size={22} />}\r\n                label=\"Hint\"\r\n                onClick={getHint}\r\n                badge={`${hintsRemaining}`}\r\n                disabled={hintsRemaining <= 0}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface ControlBtnProps {\r\n    icon: React.ReactNode;\r\n    label: string;\r\n    onClick?: () => void;\r\n    isActive?: boolean;\r\n    badge?: string;\r\n    disabled?: boolean;\r\n}\r\n\r\nconst ControlBtn = ({ icon, label, onClick, isActive, badge, disabled }: ControlBtnProps) => (\r\n    <motion.button\r\n        whileTap={disabled ? {} : { scale: 0.9 }}\r\n        whileHover={disabled ? {} : { scale: 1.05 }}\r\n        onClick={disabled ? undefined : onClick}\r\n        suppressHydrationWarning\r\n        draggable={false}\r\n        className={cn(\r\n            \"flex flex-col items-center gap-2 group relative transition-all outline-none\",\r\n            disabled\r\n                ? \"text-slate-300 cursor-not-allowed opacity-50\"\r\n                : isActive ? \"text-indigo-600\" : \"text-slate-400 hover:text-indigo-600\"\r\n        )}\r\n    >\r\n        <div className={cn(\r\n            \"w-14 h-14 rounded-2xl flex items-center justify-center transition-all border-2 shadow-sm\",\r\n            disabled\r\n                ? \"bg-slate-50 border-slate-100 text-slate-300\"\r\n                : isActive\r\n                    ? \"bg-indigo-600 text-white border-indigo-600 shadow-indigo-200 shadow-lg ring-2 ring-indigo-100 ring-offset-2\"\r\n                    : \"bg-white border-slate-100 text-slate-600 group-hover:border-indigo-100 group-hover:bg-indigo-50 group-hover:text-indigo-600\"\r\n        )}>\r\n            {icon}\r\n        </div>\r\n        <span className=\"text-[10px] font-bold tracking-widest uppercase\">{label}</span>\r\n        {badge && (\r\n            <motion.div\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                className={cn(\r\n                    \"absolute top-0 right-0 -mr-1 -mt-1 text-[9px] font-bold px-1.5 py-0.5 rounded-full shadow-sm z-10 border border-white\",\r\n                    disabled ? \"bg-slate-300 text-white\" : isActive ? \"bg-white text-indigo-600\" : \"bg-slate-800 text-white\"\r\n                )}\r\n            >\r\n                {badge}\r\n            </motion.div>\r\n        )}\r\n    </motion.button>\r\n);\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;AAEO,MAAM,eAAe;;IACxB,MAAM,OAAO,IAAA,+HAAY;2CAAC,CAAA,QAAS,MAAM,IAAI;;IAE7C,MAAM,kBAAkB,IAAA,+HAAY;sDAAC,CAAA,QAAS,MAAM,eAAe;;IACnE,MAAM,cAAc,IAAA,+HAAY;kDAAC,CAAA,QAAS,MAAM,WAAW;;IAC3D,MAAM,eAAe,IAAA,+HAAY;mDAAC,CAAA,QAAS,MAAM,YAAY;;IAC7D,MAAM,UAAU,IAAA,+HAAY;8CAAC,CAAA,QAAS,MAAM,OAAO;;IACnD,MAAM,iBAAiB,IAAA,+HAAY;qDAAC,CAAA,QAAS,MAAM,cAAc;;IAIjE,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBACG,oBAAM,6LAAC,gOAAS;oBAAC,MAAM;;;;;;gBACvB,OAAM;gBACN,SAAS;;;;;;0BAEb,6LAAC;gBACG,oBAAM,6LAAC,mNAAM;oBAAC,MAAM;;;;;;gBACpB,OAAM;gBACN,SAAS,IAAM,aAAa;;;;;;0BAEhC,6LAAC;gBACG,oBAAM,6LAAC,mNAAM;oBAAC,MAAM;;;;;;gBACpB,OAAM;gBACN,UAAU;gBACV,SAAS;gBACT,OAAO,cAAc,OAAO;;;;;;0BAEhC,6LAAC;gBACG,oBAAM,6LAAC,4NAAS;oBAAC,MAAM;;;;;;gBACvB,OAAM;gBACN,SAAS;gBACT,OAAO,GAAG,gBAAgB;gBAC1B,UAAU,kBAAkB;;;;;;;;;;;;AAI5C;GAvCa;;QACI,+HAAY;QAED,+HAAY;QAChB,+HAAY;QACX,+HAAY;QACjB,+HAAY;QACL,+HAAY;;;KAP1B;AAkDb,MAAM,aAAa,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAmB,iBACpF,6LAAC,uMAAM,CAAC,MAAM;QACV,UAAU,WAAW,CAAC,IAAI;YAAE,OAAO;QAAI;QACvC,YAAY,WAAW,CAAC,IAAI;YAAE,OAAO;QAAK;QAC1C,SAAS,WAAW,YAAY;QAChC,wBAAwB;QACxB,WAAW;QACX,WAAW,IAAA,qHAAE,EACT,+EACA,WACM,iDACA,WAAW,oBAAoB;;0BAGzC,6LAAC;gBAAI,WAAW,IAAA,qHAAE,EACd,4FACA,WACM,gDACA,WACI,gHACA;0BAET;;;;;;0BAEL,6LAAC;gBAAK,WAAU;0BAAmD;;;;;;YAClE,uBACG,6LAAC,uMAAM,CAAC,GAAG;gBACP,SAAS;oBAAE,OAAO;gBAAE;gBACpB,SAAS;oBAAE,OAAO;gBAAE;gBACpB,WAAW,IAAA,qHAAE,EACT,yHACA,WAAW,4BAA4B,WAAW,6BAA6B;0BAGlF;;;;;;;;;;;;MAlCX"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/Numpad.tsx"],"sourcesContent":["import { useGameStore } from \"@/lib/store\";\r\nimport { motion, PanInfo } from \"framer-motion\";\r\n\r\nexport const Numpad = () => {\r\n    const setCellValue = useGameStore(state => state.setCellValue);\r\n    const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n\r\n    const handleDragStart = () => {\r\n        // Prevent default touch actions if needed, though Framer Motion handles most\r\n    };\r\n\r\n    // Helper to find the cell under the cursor/finger\r\n    const getCellFromPoint = (x: number, y: number) => {\r\n        // Use elementsFromPoint to find all elements, then find the cell\r\n        // This is more robust than elementFromPoint if the dragged item blocks the cell\r\n        const elements = document.elementsFromPoint(x, y);\r\n        for (const element of elements) {\r\n            const cell = element.closest('[data-cell-row]');\r\n            if (cell) {\r\n                const r = parseInt(cell.getAttribute('data-cell-row') || '-1');\r\n                const c = parseInt(cell.getAttribute('data-cell-col') || '-1');\r\n                if (r !== -1 && c !== -1) return { r, c };\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const handleDrag = (_: any, info: PanInfo) => {\r\n        // Simple throttle: only update if point moved significantly or restrict frequency\r\n        // For now, rely on Framer Motion's internal checks but ensure we don't spam store\r\n        const point = info.point;\r\n        const cell = getCellFromPoint(point.x, point.y);\r\n\r\n        // Optimization: Only update if cell changed\r\n        const currentHover = useGameStore.getState().hoveredCell;\r\n        if (cell?.r !== currentHover?.r || cell?.c !== currentHover?.c) {\r\n            useGameStore.getState().setHoveredCell(cell);\r\n        }\r\n    };\r\n\r\n    const handleDragEnd = (event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo, num: number) => {\r\n        const point = info.point;\r\n        const cellCoords = getCellFromPoint(point.x, point.y);\r\n        const state = useGameStore.getState();\r\n\r\n        // Clear hover state\r\n        state.setHoveredCell(null);\r\n\r\n        if (cellCoords) {\r\n            const { r, c } = cellCoords;\r\n            // Check if cell is editable (not initial)\r\n            if (!state.initialBoard[r][c]) {\r\n                state.selectCell(r, c);\r\n                state.setCellValue(num);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-9 lg:grid-cols-3 gap-1 lg:gap-2 w-full touch-none\">\r\n            {numbers.map((num) => (\r\n                <motion.div\r\n                    key={num}\r\n                    drag\r\n                    dragSnapToOrigin\r\n                    dragElastic={0.1}\r\n                    dragMomentum={false}\r\n                    whileDrag={{ scale: 1.2, zIndex: 50, cursor: \"grabbing\" }}\r\n                    onDragStart={handleDragStart}\r\n                    onDrag={handleDrag}\r\n                    onDragEnd={(e, info) => handleDragEnd(e, info, num)}\r\n                    onPointerDown={(e) => {\r\n                        // Prevent default touch behaviors that might interfere\r\n                        e.preventDefault();\r\n                    }}\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.90 }}\r\n                    onClick={() => setCellValue(num)} // Keep click for accessibility/speed\r\n                    className=\"aspect-square lg:aspect-[4/3] flex items-center justify-center text-2xl lg:text-4xl font-light text-indigo-600 bg-white shadow-sm border border-slate-200 hover:bg-slate-50 hover:border-indigo-200 hover:text-indigo-700 active:bg-indigo-100 rounded-lg lg:rounded-xl transition-colors duration-75 cursor-grab active:cursor-grabbing touch-none select-none\"\r\n                    style={{ touchAction: 'none' }} // Hint for touch devices\r\n                >\r\n                    {num}\r\n                </motion.div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAEO,MAAM,SAAS;;IAClB,MAAM,eAAe,IAAA,+HAAY;6CAAC,CAAA,QAAS,MAAM,YAAY;;IAC7D,MAAM,UAAU;QAAC;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;QAAG;KAAE;IAE3C,MAAM,kBAAkB;IACpB,6EAA6E;IACjF;IAEA,kDAAkD;IAClD,MAAM,mBAAmB,CAAC,GAAW;QACjC,iEAAiE;QACjE,gFAAgF;QAChF,MAAM,WAAW,SAAS,iBAAiB,CAAC,GAAG;QAC/C,KAAK,MAAM,WAAW,SAAU;YAC5B,MAAM,OAAO,QAAQ,OAAO,CAAC;YAC7B,IAAI,MAAM;gBACN,MAAM,IAAI,SAAS,KAAK,YAAY,CAAC,oBAAoB;gBACzD,MAAM,IAAI,SAAS,KAAK,YAAY,CAAC,oBAAoB;gBACzD,IAAI,MAAM,CAAC,KAAK,MAAM,CAAC,GAAG,OAAO;oBAAE;oBAAG;gBAAE;YAC5C;QACJ;QACA,OAAO;IACX;IAEA,8DAA8D;IAC9D,MAAM,aAAa,CAAC,GAAQ;QACxB,kFAAkF;QAClF,kFAAkF;QAClF,MAAM,QAAQ,KAAK,KAAK;QACxB,MAAM,OAAO,iBAAiB,MAAM,CAAC,EAAE,MAAM,CAAC;QAE9C,4CAA4C;QAC5C,MAAM,eAAe,+HAAY,CAAC,QAAQ,GAAG,WAAW;QACxD,IAAI,MAAM,MAAM,cAAc,KAAK,MAAM,MAAM,cAAc,GAAG;YAC5D,+HAAY,CAAC,QAAQ,GAAG,cAAc,CAAC;QAC3C;IACJ;IAEA,MAAM,gBAAgB,CAAC,OAA+C,MAAe;QACjF,MAAM,QAAQ,KAAK,KAAK;QACxB,MAAM,aAAa,iBAAiB,MAAM,CAAC,EAAE,MAAM,CAAC;QACpD,MAAM,QAAQ,+HAAY,CAAC,QAAQ;QAEnC,oBAAoB;QACpB,MAAM,cAAc,CAAC;QAErB,IAAI,YAAY;YACZ,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG;YACjB,0CAA0C;YAC1C,IAAI,CAAC,MAAM,YAAY,CAAC,EAAE,CAAC,EAAE,EAAE;gBAC3B,MAAM,UAAU,CAAC,GAAG;gBACpB,MAAM,YAAY,CAAC;YACvB;QACJ;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACV,QAAQ,GAAG,CAAC,CAAC,oBACV,6LAAC,uMAAM,CAAC,GAAG;gBAEP,IAAI;gBACJ,gBAAgB;gBAChB,aAAa;gBACb,cAAc;gBACd,WAAW;oBAAE,OAAO;oBAAK,QAAQ;oBAAI,QAAQ;gBAAW;gBACxD,aAAa;gBACb,QAAQ;gBACR,WAAW,CAAC,GAAG,OAAS,cAAc,GAAG,MAAM;gBAC/C,eAAe,CAAC;oBACZ,uDAAuD;oBACvD,EAAE,cAAc;gBACpB;gBACA,YAAY;oBAAE,OAAO;gBAAK;gBAC1B,UAAU;oBAAE,OAAO;gBAAK;gBACxB,SAAS,IAAM,aAAa;gBAC5B,WAAU;gBACV,OAAO;oBAAE,aAAa;gBAAO;0BAE5B;eAnBI;;;;;;;;;;AAwBzB;GApFa;;QACY,+HAAY;;;KADxB"}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/Timer.tsx"],"sourcesContent":["import { useGameStore } from '@/lib/store';\r\n\r\nexport const Timer = () => {\r\n    // Timer component is now purely for display.\r\n    // The actual interval logic is handled in the main page to avoid duplication.\r\n    const timer = useGameStore(state => state.timer);\r\n\r\n    const formatTime = (seconds: number) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"font-mono text-xl font-medium text-slate-700 dark:text-slate-300\">\r\n            {formatTime(timer)}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;;;;AAEO,MAAM,QAAQ;;IACjB,6CAA6C;IAC7C,8EAA8E;IAC9E,MAAM,QAAQ,IAAA,+HAAY;qCAAC,CAAA,QAAS,MAAM,KAAK;;IAE/C,MAAM,aAAa,CAAC;QAChB,MAAM,OAAO,KAAK,KAAK,CAAC,UAAU;QAClC,MAAM,OAAO,UAAU;QACvB,OAAO,GAAG,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IACpF;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACV,WAAW;;;;;;AAGxB;GAhBa;;QAGK,+HAAY;;;KAHjB"}},
    {"offset": {"line": 655, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/HintToast.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useGameStore } from '@/lib/store';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Sparkles } from 'lucide-react';\r\n\r\nexport const HintToast = () => {\r\n    const lastHint = useGameStore(state => state.lastHint);\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {lastHint && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                    animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                    exit={{ opacity: 0, y: -10, scale: 0.95 }}\r\n                    transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n                    className=\"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 max-w-sm w-[90vw]\"\r\n                >\r\n                    <div className=\"bg-white border border-amber-200 rounded-2xl shadow-lg shadow-amber-100/50 px-5 py-3.5 flex items-start gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center flex-shrink-0 shadow-sm\">\r\n                            <Sparkles size={16} className=\"text-white\" />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-[11px] font-bold uppercase tracking-widest text-amber-600 mb-0.5\">\r\n                                {lastHint.strategy === 'naked_single' ? 'Naked Single' : lastHint.strategy === 'hidden_single' ? 'Hidden Single' : 'Hint'}\r\n                            </p>\r\n                            <p className=\"text-sm text-slate-700 leading-snug\">\r\n                                {lastHint.reason}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AAMO,MAAM,YAAY;;IACrB,MAAM,WAAW,IAAA,+HAAY;4CAAC,CAAA,QAAS,MAAM,QAAQ;;IAErD,qBACI,6LAAC,+MAAe;kBACX,0BACG,6LAAC,uMAAM,CAAC,GAAG;YACP,SAAS;gBAAE,SAAS;gBAAG,GAAG;gBAAI,OAAO;YAAK;YAC1C,SAAS;gBAAE,SAAS;gBAAG,GAAG;gBAAG,OAAO;YAAE;YACtC,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;gBAAI,OAAO;YAAK;YACxC,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,WAAU;sBAEV,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,yNAAQ;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAElC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAE,WAAU;0CACR,SAAS,QAAQ,KAAK,iBAAiB,iBAAiB,SAAS,QAAQ,KAAK,kBAAkB,kBAAkB;;;;;;0CAEvH,6LAAC;gCAAE,WAAU;0CACR,SAAS,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhD;GA9Ba;;QACQ,+HAAY;;;KADpB"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/lib/firebase/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp, FirebaseApp } from \"firebase/app\";\r\nimport { getDatabase, Database } from \"firebase/database\";\r\nimport { getAuth, Auth } from \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n    databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL || \"https://sudoku-fb1a9-default-rtdb.firebaseio.com\",\r\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\r\n};\r\n\r\n// Initialize Firebase\r\nlet app: FirebaseApp | undefined;\r\nlet db: Database | undefined;\r\nlet auth: Auth | undefined;\r\n\r\ntry {\r\n    if (firebaseConfig.apiKey) {\r\n        console.log(\"Initializing Firebase with config:\", {\r\n            ...firebaseConfig,\r\n            apiKey: \"HIDDEN\" // Hide sensitive key in logs\r\n        });\r\n        app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\r\n        db = getDatabase(app);\r\n        auth = getAuth(app);\r\n        console.log(\"Firebase initialized successfully. DB URL:\", db.app.options.databaseURL);\r\n    } else {\r\n        // During build or if not configured, these might be accessed.\r\n        // If accessed, they will throw or be undefined.\r\n        console.warn(\"Firebase config missing. Firebase features will not work.\");\r\n    }\r\n} catch (e) {\r\n    console.warn(\"Firebase initialization failed:\", e);\r\n}\r\n\r\nexport { app, db, auth };\r\n"],"names":[],"mappings":";;;;;;;;AAKY;AALZ;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,aAAa,wFAAiD;IAC9D,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACT;AAEA,sBAAsB;AACtB,IAAI;AACJ,IAAI;AACJ,IAAI;AAEJ,IAAI;IACA,IAAI,eAAe,MAAM,EAAE;QACvB,QAAQ,GAAG,CAAC,sCAAsC;YAC9C,GAAG,cAAc;YACjB,QAAQ,SAAS,6BAA6B;QAClD;QACA,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;QAChE,KAAK,IAAA,gLAAW,EAAC;QACjB,OAAO,IAAA,wKAAO,EAAC;QACf,QAAQ,GAAG,CAAC,8CAA8C,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW;IACxF,OAAO;QACH,8DAA8D;QAC9D,gDAAgD;QAChD,QAAQ,IAAI,CAAC;IACjB;AACJ,EAAE,OAAO,GAAG;IACR,QAAQ,IAAI,CAAC,mCAAmC;AACpD"}},
    {"offset": {"line": 830, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/lib/logic/sudoku.ts"],"sourcesContent":["// lib/logic/sudoku.ts\r\n\r\nexport type Difficulty = 'Easy' | 'Medium' | 'Hard' | 'Expert';\r\n\r\nexport const BLANK = 0;\r\nexport const GRID_SIZE = 9;\r\n\r\nexport function isValid(board: number[][], row: number, col: number, num: number): boolean {\r\n    for (let i = 0; i < GRID_SIZE; i++) {\r\n        if (board[row][i] === num && i !== col) return false;\r\n        if (board[i][col] === num && i !== row) return false;\r\n        const blockRow = 3 * Math.floor(row / 3) + Math.floor(i / 3);\r\n        const blockCol = 3 * Math.floor(col / 3) + (i % 3);\r\n        if (board[blockRow][blockCol] === num && (blockRow !== row || blockCol !== col)) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function solveSudoku(board: number[][], randomize = false): boolean {\r\n    for (let row = 0; row < GRID_SIZE; row++) {\r\n        for (let col = 0; col < GRID_SIZE; col++) {\r\n            if (board[row][col] === BLANK) {\r\n                const nums = [1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n                if (randomize) {\r\n                    // Fisher-Yates shuffle\r\n                    for (let i = nums.length - 1; i > 0; i--) {\r\n                        const j = Math.floor(Math.random() * (i + 1));\r\n                        [nums[i], nums[j]] = [nums[j], nums[i]];\r\n                    }\r\n                }\r\n\r\n                for (const num of nums) {\r\n                    if (isValid(board, row, col, num)) {\r\n                        board[row][col] = num;\r\n                        if (solveSudoku(board, randomize)) return true;\r\n                        board[row][col] = BLANK;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function generateSudoku(difficulty: Difficulty): { initial: number[][], solved: number[][] } {\r\n    // 1. Generate a solved board\r\n    const solved = Array.from({ length: GRID_SIZE }, () => Array(GRID_SIZE).fill(BLANK));\r\n    solveSudoku(solved, true);\r\n\r\n    // 2. Clone for the puzzle\r\n    const initial = solved.map(row => [...row]);\r\n\r\n    // 3. Remove numbers based on difficulty\r\n    let attempts = difficulty === 'Easy' ? 30\r\n        : difficulty === 'Medium' ? 45\r\n            : difficulty === 'Hard' ? 55\r\n                : 60; // Expert\r\n\r\n    while (attempts > 0) {\r\n        let row = Math.floor(Math.random() * GRID_SIZE);\r\n        let col = Math.floor(Math.random() * GRID_SIZE);\r\n        while (initial[row][col] === BLANK) {\r\n            row = Math.floor(Math.random() * GRID_SIZE);\r\n            col = Math.floor(Math.random() * GRID_SIZE);\r\n        }\r\n\r\n        // Backup\r\n        // const backup = initial[row][col];\r\n        initial[row][col] = BLANK;\r\n\r\n        // Check if unique solution exists (simplified: just check if removing it made it unsolvable or ambiguous - for now assume standard removal is fine enough for this demo, or implement full unique check if needed. For speed, we'll stick to a probabilistic approach or just ensure at least 1 solution remains, which is guaranteed if we start from solved. Uniqueness is harder but let's trust the \"attempts\" heuristic for now.)\r\n        // A true unique checker solves the board again and ensures only 1 solution. \r\n        // For this MVP, we will skip strict uniqueness check to ensure performance, \r\n        // but normally you'd check `countSolutions(initial) === 1`.\r\n\r\n        attempts--;\r\n    }\r\n\r\n    return { initial, solved };\r\n}\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;;;;;;;AAIf,MAAM,QAAQ;AACd,MAAM,YAAY;AAElB,SAAS,QAAQ,KAAiB,EAAE,GAAW,EAAE,GAAW,EAAE,GAAW;IAC5E,IAAK,IAAI,IAAI,GAAG,IAAI,WAAW,IAAK;QAChC,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,OAAO,MAAM,KAAK,OAAO;QAC/C,IAAI,KAAK,CAAC,EAAE,CAAC,IAAI,KAAK,OAAO,MAAM,KAAK,OAAO;QAC/C,MAAM,WAAW,IAAI,KAAK,KAAK,CAAC,MAAM,KAAK,KAAK,KAAK,CAAC,IAAI;QAC1D,MAAM,WAAW,IAAI,KAAK,KAAK,CAAC,MAAM,KAAM,IAAI;QAChD,IAAI,KAAK,CAAC,SAAS,CAAC,SAAS,KAAK,OAAO,CAAC,aAAa,OAAO,aAAa,GAAG,GAAG,OAAO;IAC5F;IACA,OAAO;AACX;AAEO,SAAS,YAAY,KAAiB,EAAE,YAAY,KAAK;IAC5D,IAAK,IAAI,MAAM,GAAG,MAAM,WAAW,MAAO;QACtC,IAAK,IAAI,MAAM,GAAG,MAAM,WAAW,MAAO;YACtC,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO;gBAC3B,MAAM,OAAO;oBAAC;oBAAG;oBAAG;oBAAG;oBAAG;oBAAG;oBAAG;oBAAG;oBAAG;iBAAE;gBACxC,IAAI,WAAW;oBACX,uBAAuB;oBACvB,IAAK,IAAI,IAAI,KAAK,MAAM,GAAG,GAAG,IAAI,GAAG,IAAK;wBACtC,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,CAAC,IAAI,CAAC;wBAC3C,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,GAAG;4BAAC,IAAI,CAAC,EAAE;4BAAE,IAAI,CAAC,EAAE;yBAAC;oBAC3C;gBACJ;gBAEA,KAAK,MAAM,OAAO,KAAM;oBACpB,IAAI,QAAQ,OAAO,KAAK,KAAK,MAAM;wBAC/B,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG;wBAClB,IAAI,YAAY,OAAO,YAAY,OAAO;wBAC1C,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG;oBACtB;gBACJ;gBACA,OAAO;YACX;QACJ;IACJ;IACA,OAAO;AACX;AAEO,SAAS,eAAe,UAAsB;IACjD,6BAA6B;IAC7B,MAAM,SAAS,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAU,GAAG,IAAM,MAAM,WAAW,IAAI,CAAC;IAC7E,YAAY,QAAQ;IAEpB,0BAA0B;IAC1B,MAAM,UAAU,OAAO,GAAG,CAAC,CAAA,MAAO;eAAI;SAAI;IAE1C,wCAAwC;IACxC,IAAI,WAAW,eAAe,SAAS,KACjC,eAAe,WAAW,KACtB,eAAe,SAAS,KACpB,IAAI,SAAS;IAE3B,MAAO,WAAW,EAAG;QACjB,IAAI,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QACrC,IAAI,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QACrC,MAAO,OAAO,CAAC,IAAI,CAAC,IAAI,KAAK,MAAO;YAChC,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;YACjC,MAAM,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QACrC;QAEA,SAAS;QACT,oCAAoC;QACpC,OAAO,CAAC,IAAI,CAAC,IAAI,GAAG;QAEpB,uaAAua;QACva,6EAA6E;QAC7E,6EAA6E;QAC7E,4DAA4D;QAE5D;IACJ;IAEA,OAAO;QAAE;QAAS;IAAO;AAC7B"}},
    {"offset": {"line": 933, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/lib/firebase/rooms.ts"],"sourcesContent":["import { db, auth } from \"./firebase\";\r\nimport { ref, set, onValue, update, get, onDisconnect, remove } from \"firebase/database\";\r\nimport { generateSudoku, Difficulty } from \"../logic/sudoku\";\r\n\r\nconst getDb = () => {\r\n    if (!db) throw new Error(\"Firebase database is not initialized\");\r\n    return db;\r\n};\r\n\r\nconst getAuth = () => {\r\n    if (!auth) throw new Error(\"Firebase auth is not initialized\");\r\n    return auth;\r\n};\r\n\r\nexport interface Room {\r\n    id: string;\r\n    status: 'waiting' | 'playing' | 'finished';\r\n    difficulty: Difficulty;\r\n    initialBoard: number[][];\r\n    currentBoard: number[][];\r\n    solvedBoard: number[][];\r\n    players: {\r\n        [uid: string]: {\r\n            name: string;\r\n            progress: number;\r\n            mistakes: number;\r\n            status: 'playing' | 'won' | 'lost' | 'offline';\r\n        }\r\n    };\r\n    winner: string | null;\r\n    createdAt: number;\r\n}\r\n\r\n/**\r\n * Generate a short 6-character alphanumeric room code.\r\n */\r\nfunction generateShortCode(): string {\r\n    const chars = 'ABCDEFGHJKMNPQRSTUVWXYZ23456789';\r\n    let code = '';\r\n    for (let i = 0; i < 6; i++) {\r\n        code += chars[Math.floor(Math.random() * chars.length)];\r\n    }\r\n    return code;\r\n}\r\n\r\n/**\r\n * Setup presence handling for a player in a room.\r\n */\r\nconst setupPresence = (roomId: string, uid: string) => {\r\n    const playerStatusRef = ref(getDb(), `rooms/${roomId}/players/${uid}/status`);\r\n    // On disconnect, mark as offline\r\n    onDisconnect(playerStatusRef).set('offline');\r\n};\r\n\r\n/**\r\n * Create a new PvP room.\r\n */\r\nexport const createRoom = async (playerName: string, difficulty: Difficulty): Promise<string> => {\r\n    let code = '';\r\n    let attempts = 0;\r\n    const user = getAuth().currentUser;\r\n    if (!user) throw new Error(\"User must be signed in to create a room\");\r\n\r\n    while (attempts < 5) {\r\n        code = generateShortCode();\r\n        const dbRef = ref(getDb(), `rooms/${code}`);\r\n        const snapshot = await get(dbRef);\r\n        if (!snapshot.exists()) break;\r\n        attempts++;\r\n    }\r\n\r\n    const { initial, solved } = generateSudoku(difficulty);\r\n    const currentBoard = initial.map(row => [...row]);\r\n\r\n    await set(ref(getDb(), `rooms/${code}`), {\r\n        id: code,\r\n        status: 'waiting',\r\n        difficulty,\r\n        initialBoard: initial,\r\n        currentBoard: currentBoard,\r\n        solvedBoard: solved,\r\n        players: {\r\n            [user.uid]: {\r\n                name: playerName || user.displayName || 'Player 1',\r\n                progress: 0,\r\n                mistakes: 0,\r\n                status: 'playing'\r\n            }\r\n        },\r\n        winner: null,\r\n        createdAt: Date.now()\r\n    });\r\n\r\n    setupPresence(code, user.uid);\r\n    return code;\r\n};\r\n\r\n/**\r\n * Join an existing room.\r\n */\r\nexport const joinRoom = async (roomId: string, playerName: string) => {\r\n    const user = getAuth().currentUser;\r\n    if (!user) throw new Error(\"User must be signed in to join a room\");\r\n\r\n    const roomRef = ref(getDb(), `rooms/${roomId}`);\r\n    const snapshot = await get(roomRef);\r\n\r\n    if (!snapshot.exists()) {\r\n        throw new Error(\"Room not found.\");\r\n    }\r\n\r\n    const room = snapshot.val();\r\n    if (room.status !== 'waiting' && !room.players[user.uid]) {\r\n        throw new Error(\"This game has already started.\");\r\n    }\r\n\r\n    // Add or rejoin player\r\n    await update(ref(getDb(), `rooms/${roomId}/players/${user.uid}`), {\r\n        name: playerName || user.displayName || 'Player 2',\r\n        progress: room.players[user.uid]?.progress || 0,\r\n        mistakes: room.players[user.uid]?.mistakes || 0,\r\n        status: 'playing'\r\n    });\r\n\r\n    // Auto-start when 2nd player joins\r\n    const existingPlayers = Object.keys(room.players || {});\r\n    if (existingPlayers.length >= 1 && !room.players[user.uid]) {\r\n        await update(roomRef, { status: 'playing' });\r\n    }\r\n\r\n    setupPresence(roomId, user.uid);\r\n};\r\n\r\n/**\r\n * Update player progress.\r\n */\r\nexport const updateProgress = async (\r\n    roomId: string,\r\n    progress: number,\r\n    mistakes: number,\r\n    status: 'playing' | 'won' | 'lost'\r\n) => {\r\n    const user = getAuth().currentUser;\r\n    if (!user) return;\r\n\r\n    await update(ref(getDb(), `rooms/${roomId}/players/${user.uid}`), {\r\n        progress,\r\n        mistakes,\r\n        status\r\n    });\r\n\r\n    if (status === 'won') {\r\n        const roomRef = ref(getDb(), `rooms/${roomId}`);\r\n        const snap = await get(roomRef);\r\n        if (snap.val() && !snap.val().winner) {\r\n            await update(roomRef, {\r\n                winner: user.displayName || user.uid,\r\n                status: 'finished'\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Real-time subscriptions\r\n */\r\nexport const subscribeToRoom = (roomId: string, callback: (room: Room) => void) => {\r\n    const roomRef = ref(getDb(), `rooms/${roomId}`);\r\n    return onValue(roomRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) callback(data);\r\n    });\r\n};\r\n\r\nexport const subscribeToPlayers = (roomId: string, callback: (players: Room['players']) => void) => {\r\n    const playersRef = ref(getDb(), `rooms/${roomId}/players`);\r\n    return onValue(playersRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) callback(data);\r\n    });\r\n};\r\n\r\nexport const updateBoardCell = async (roomId: string, r: number, c: number, value: number) => {\r\n    await set(ref(getDb(), `rooms/${roomId}/currentBoard/${r}/${c}`), value);\r\n};\r\n\r\nexport const subscribeToBoard = (roomId: string, callback: (board: number[][]) => void) => {\r\n    const boardRef = ref(getDb(), `rooms/${roomId}/currentBoard`);\r\n    return onValue(boardRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) callback(data);\r\n    });\r\n};\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/layout/Lobby.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useGameStore } from '@/lib/store';\r\nimport { createRoom, joinRoom, subscribeToRoom } from '@/lib/firebase/rooms';\r\nimport { db } from '@/lib/firebase/firebase';\r\nimport { ref, get } from 'firebase/database';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Copy, Check, Users, ArrowLeft, Loader2, Swords } from 'lucide-react';\r\n\r\nexport const Lobby = () => {\r\n    const { setMultiplayerState } = useGameStore();\r\n    const [name, setName] = useState('');\r\n    const [roomIdInput, setRoomIdInput] = useState('');\r\n    const [createdRoomId, setCreatedRoomId] = useState<string | null>(null);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    const handleCreate = async () => {\r\n        if (!name.trim()) {\r\n            setError(\"Enter your name to continue\");\r\n            return;\r\n        }\r\n        setError('');\r\n        setLoading(true);\r\n        try {\r\n            const id = await createRoom(name.trim(), 'Medium');\r\n            setCreatedRoomId(id);\r\n            setMultiplayerState({ roomId: id, playerId: name.trim(), mode: 'pvp', status: 'waiting' });\r\n\r\n            // Listen for opponent joining\r\n            const unsubscribe = subscribeToRoom(id, (room) => {\r\n                if (room.status === 'playing') {\r\n                    setMultiplayerState({\r\n                        status: 'playing',\r\n                        board: room.initialBoard,\r\n                        initialBoard: room.initialBoard,\r\n                        solvedBoard: room.solvedBoard,\r\n                        difficulty: room.difficulty\r\n                    });\r\n                    const opponent = Object.values(room.players || {}).find(p => p.name !== name.trim());\r\n                    if (opponent) {\r\n                        setMultiplayerState({ opponentName: opponent.name });\r\n                    }\r\n                    unsubscribe(); // Stop listening from Lobby once game starts\r\n                }\r\n            });\r\n        } catch (error: unknown) {\r\n            console.error(\"Lobby Create Error:\", error);\r\n            const msg = error instanceof Error ? error.message : \"Failed to create room\";\r\n            setError(msg);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJoin = async () => {\r\n        if (!name.trim() || !roomIdInput.trim()) {\r\n            setError(\"Enter your name and room code\");\r\n            return;\r\n        }\r\n        setError('');\r\n        setLoading(true);\r\n        try {\r\n            const code = roomIdInput.trim().toUpperCase();\r\n            await joinRoom(code, name.trim());\r\n            setMultiplayerState({ roomId: code, playerId: name.trim(), mode: 'pvp' });\r\n\r\n            const unsubscribe = subscribeToRoom(code, (room) => {\r\n                if (room.status === 'playing') {\r\n                    setMultiplayerState({\r\n                        status: 'playing',\r\n                        board: room.initialBoard,\r\n                        initialBoard: room.initialBoard,\r\n                        solvedBoard: room.solvedBoard,\r\n                        difficulty: room.difficulty\r\n                    });\r\n                    const opponent = Object.values(room.players || {}).find(p => p.name !== name.trim());\r\n                    if (opponent) {\r\n                        setMultiplayerState({ opponentName: opponent.name });\r\n                    }\r\n                    unsubscribe();\r\n                }\r\n            });\r\n        } catch (error: unknown) {\r\n            const msg = error instanceof Error ? error.message : \"Failed to join room\";\r\n            setError(msg);\r\n            alert(msg); // Force visible error for debugging\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCopy = () => {\r\n        if (!createdRoomId) return;\r\n        navigator.clipboard.writeText(createdRoomId);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n\r\n\r\n    const testConnection = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (!db) throw new Error(\"Database not initialized\");\r\n\r\n            console.log(\"Testing connection...\", db);\r\n            const testRef = ref(db, \"status\");\r\n\r\n            console.log(\"Getting snapshot...\");\r\n            await get(testRef);\r\n            alert(`Firebase Connected!`);\r\n        } catch (e) {\r\n            console.error(\"Connection Test Failed:\", e);\r\n            alert(`Connection Test Failed: ${e instanceof Error ? e.message : String(e)}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- \"Waiting for Opponent\" Screen ---\r\n    if (createdRoomId) {\r\n        return (\r\n            <motion.div\r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                className=\"flex flex-col items-center justify-center w-full max-w-md mx-auto p-8\"\r\n            >\r\n                <div className=\"bg-white rounded-3xl shadow-xl shadow-slate-200/60 border border-slate-100 p-8 w-full text-center\">\r\n                    {/* Header */}\r\n                    <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center mx-auto mb-5 shadow-lg shadow-indigo-200\">\r\n                        <Swords size={28} className=\"text-white\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold text-slate-800 mb-1\">Room Created!</h2>\r\n                    <p className=\"text-sm text-slate-400 mb-6\">Share this code with your opponent</p>\r\n\r\n                    {/* Room Code */}\r\n                    <div className=\"bg-slate-50 border border-slate-100 rounded-2xl p-6 mb-6\">\r\n                        <p className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400 mb-2\">Room Code</p>\r\n                        <div className=\"flex items-center justify-center gap-3\">\r\n                            <p className=\"text-4xl font-mono font-black tracking-[0.3em] text-slate-800 select-all\">{createdRoomId}</p>\r\n                            <button\r\n                                onClick={handleCopy}\r\n                                className=\"w-10 h-10 rounded-xl bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:text-indigo-600 hover:border-indigo-200 transition-all shadow-sm\"\r\n                            >\r\n                                {copied ? <Check size={18} className=\"text-emerald-500\" /> : <Copy size={18} />}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Waiting indicator */}\r\n                    <div className=\"flex items-center justify-center gap-3 text-indigo-500\">\r\n                        <Loader2 size={18} className=\"animate-spin\" />\r\n                        <span className=\"text-sm font-medium\">Waiting for opponent...</span>\r\n                    </div>\r\n\r\n                    {/* Back button */}\r\n                    <button\r\n                        onClick={() => setCreatedRoomId(null)}\r\n                        className=\"mt-6 flex items-center gap-2 mx-auto text-sm text-slate-400 hover:text-slate-600 transition-colors\"\r\n                    >\r\n                        <ArrowLeft size={14} />\r\n                        <span>Back</span>\r\n                    </button>\r\n                </div>\r\n            </motion.div>\r\n        );\r\n    }\r\n\r\n    // --- Main Lobby Screen ---\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ type: 'spring', stiffness: 300, damping: 25 }}\r\n            className=\"flex flex-col items-center justify-center w-full max-w-sm mx-auto p-4\"\r\n        >\r\n            <div className=\"bg-white rounded-3xl shadow-xl shadow-slate-200/60 border border-slate-100 p-8 w-full\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center mx-auto mb-4 shadow-lg shadow-indigo-200\">\r\n                        <Users size={24} className=\"text-white\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold text-slate-800\">PvP Arena</h2>\r\n                    <p className=\"text-sm text-slate-400 mt-1\">Challenge a friend in real-time</p>\r\n                </div>\r\n\r\n                {/* Name Input */}\r\n                <div className=\"mb-6\">\r\n                    <label className=\"text-[10px] font-bold uppercase tracking-[0.15em] text-slate-400 mb-2 block\">Your Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter your name\"\r\n                        value={name}\r\n                        onChange={e => { setName(e.target.value); setError(''); }}\r\n                        maxLength={16}\r\n                        className=\"w-full px-4 py-3.5 rounded-xl border-2 border-slate-100 bg-slate-50 text-slate-800 placeholder-slate-300 font-medium focus:border-indigo-400 focus:bg-white focus:ring-4 focus:ring-indigo-50 outline-none transition-all\"\r\n                    />\r\n                </div>\r\n\r\n                {/* Create Room Button */}\r\n                <motion.button\r\n                    whileTap={{ scale: 0.97 }}\r\n                    onClick={handleCreate}\r\n                    disabled={loading}\r\n                    className=\"w-full py-3.5 bg-slate-900 text-white rounded-xl font-bold text-sm tracking-wide hover:bg-slate-800 disabled:opacity-40 disabled:cursor-not-allowed transition-all shadow-lg shadow-slate-300/30\"\r\n                >\r\n                    {loading ? (\r\n                        <span className=\"flex items-center justify-center gap-2\">\r\n                            <Loader2 size={16} className=\"animate-spin\" />\r\n                            Creating...\r\n                        </span>\r\n                    ) : 'Create Room'}\r\n                </motion.button>\r\n\r\n                {/* Divider */}\r\n                <div className=\"flex items-center gap-4 my-6\">\r\n                    <div className=\"h-[1px] bg-slate-100 flex-1\" />\r\n                    <span className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-300\">or join</span>\r\n                    <div className=\"h-[1px] bg-slate-100 flex-1\" />\r\n                </div>\r\n\r\n                {/* Join Room */}\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"ROOM CODE\"\r\n                        value={roomIdInput}\r\n                        onChange={e => { setRoomIdInput(e.target.value.toUpperCase()); setError(''); }}\r\n                        maxLength={6}\r\n                        className=\"flex-1 px-4 py-3.5 rounded-xl border-2 border-slate-100 bg-slate-50 text-slate-800 placeholder-slate-300 font-mono font-bold text-center tracking-[0.2em] uppercase focus:border-indigo-400 focus:bg-white focus:ring-4 focus:ring-indigo-50 outline-none transition-all\"\r\n                    />\r\n                    <motion.button\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={handleJoin}\r\n                        disabled={loading}\r\n                        className=\"px-6 py-3.5 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all shadow-md shadow-indigo-200/50\"\r\n                    >\r\n                        {loading ? <Loader2 size={16} className=\"animate-spin\" /> : 'Join'}\r\n                    </motion.button>\r\n                </div>\r\n\r\n                {/* Error */}\r\n                <AnimatePresence>\r\n                    {error && (\r\n                        <motion.p\r\n                            initial={{ opacity: 0, y: -5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"mt-4 text-sm text-center text-rose-500 font-medium bg-rose-50 py-2.5 rounded-xl border border-rose-100\"\r\n                        >\r\n                            {error}\r\n                        </motion.p>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Debug Tool removed - connection verified */}\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AARA;;;;;;;;AAUO,MAAM,QAAQ;;IACjB,MAAM,EAAE,mBAAmB,EAAE,GAAG,IAAA,+HAAY;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAgB;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,eAAe;QACjB,IAAI,CAAC,KAAK,IAAI,IAAI;YACd,SAAS;YACT;QACJ;QACA,SAAS;QACT,WAAW;QACX,IAAI;YACA,MAAM,KAAK,MAAM,IAAA,yIAAU,EAAC,KAAK,IAAI,IAAI;YACzC,iBAAiB;YACjB,oBAAoB;gBAAE,QAAQ;gBAAI,UAAU,KAAK,IAAI;gBAAI,MAAM;gBAAO,QAAQ;YAAU;YAExF,8BAA8B;YAC9B,MAAM,cAAc,IAAA,8IAAe,EAAC,IAAI,CAAC;gBACrC,IAAI,KAAK,MAAM,KAAK,WAAW;oBAC3B,oBAAoB;wBAChB,QAAQ;wBACR,OAAO,KAAK,YAAY;wBACxB,cAAc,KAAK,YAAY;wBAC/B,aAAa,KAAK,WAAW;wBAC7B,YAAY,KAAK,UAAU;oBAC/B;oBACA,MAAM,WAAW,OAAO,MAAM,CAAC,KAAK,OAAO,IAAI,CAAC,GAAG,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;oBACjF,IAAI,UAAU;wBACV,oBAAoB;4BAAE,cAAc,SAAS,IAAI;wBAAC;oBACtD;oBACA,eAAe,6CAA6C;gBAChE;YACJ;QACJ,EAAE,OAAO,OAAgB;YACrB,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM,MAAM,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACrD,SAAS;QACb,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,aAAa;QACf,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,YAAY,IAAI,IAAI;YACrC,SAAS;YACT;QACJ;QACA,SAAS;QACT,WAAW;QACX,IAAI;YACA,MAAM,OAAO,YAAY,IAAI,GAAG,WAAW;YAC3C,MAAM,IAAA,uIAAQ,EAAC,MAAM,KAAK,IAAI;YAC9B,oBAAoB;gBAAE,QAAQ;gBAAM,UAAU,KAAK,IAAI;gBAAI,MAAM;YAAM;YAEvE,MAAM,cAAc,IAAA,8IAAe,EAAC,MAAM,CAAC;gBACvC,IAAI,KAAK,MAAM,KAAK,WAAW;oBAC3B,oBAAoB;wBAChB,QAAQ;wBACR,OAAO,KAAK,YAAY;wBACxB,cAAc,KAAK,YAAY;wBAC/B,aAAa,KAAK,WAAW;wBAC7B,YAAY,KAAK,UAAU;oBAC/B;oBACA,MAAM,WAAW,OAAO,MAAM,CAAC,KAAK,OAAO,IAAI,CAAC,GAAG,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,KAAK,IAAI;oBACjF,IAAI,UAAU;wBACV,oBAAoB;4BAAE,cAAc,SAAS,IAAI;wBAAC;oBACtD;oBACA;gBACJ;YACJ;QACJ,EAAE,OAAO,OAAgB;YACrB,MAAM,MAAM,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACrD,SAAS;YACT,MAAM,MAAM,oCAAoC;QACpD,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,aAAa;QACf,IAAI,CAAC,eAAe;QACpB,UAAU,SAAS,CAAC,SAAS,CAAC;QAC9B,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACvC;IAIA,MAAM,iBAAiB;QACnB,WAAW;QACX,IAAI;YACA,IAAI,CAAC,oIAAE,EAAE,MAAM,IAAI,MAAM;YAEzB,QAAQ,GAAG,CAAC,yBAAyB,oIAAE;YACvC,MAAM,UAAU,IAAA,wKAAG,EAAC,oIAAE,EAAE;YAExB,QAAQ,GAAG,CAAC;YACZ,MAAM,IAAA,wKAAG,EAAC;YACV,MAAM,CAAC,mBAAmB,CAAC;QAC/B,EAAE,OAAO,GAAG;YACR,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM,CAAC,wBAAwB,EAAE,aAAa,QAAQ,EAAE,OAAO,GAAG,OAAO,IAAI;QACjF,SAAU;YACN,WAAW;QACf;IACJ;IAEA,wCAAwC;IACxC,IAAI,eAAe;QACf,qBACI,6LAAC,uMAAM,CAAC,GAAG;YACP,SAAS;gBAAE,SAAS;gBAAG,OAAO;YAAK;YACnC,SAAS;gBAAE,SAAS;gBAAG,OAAO;YAAE;YAChC,WAAU;sBAEV,cAAA,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,mNAAM;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAEhC,6LAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;kCAG3C,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAE,WAAU;0CAAuE;;;;;;0CACpF,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDAA4E;;;;;;kDACzF,6LAAC;wCACG,SAAS;wCACT,WAAU;kDAET,uBAAS,6LAAC,gNAAK;4CAAC,MAAM;4CAAI,WAAU;;;;;qGAAwB,6LAAC,6MAAI;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;kCAMrF,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,+NAAO;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC7B,6LAAC;gCAAK,WAAU;0CAAsB;;;;;;;;;;;;kCAI1C,6LAAC;wBACG,SAAS,IAAM,iBAAiB;wBAChC,WAAU;;0CAEV,6LAAC,gOAAS;gCAAC,MAAM;;;;;;0CACjB,6LAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;IAK1B;IAEA,4BAA4B;IAC5B,qBACI,6LAAC,uMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,MAAM;YAAU,WAAW;YAAK,SAAS;QAAG;QAC1D,WAAU;kBAEV,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,gNAAK;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;sCAE/B,6LAAC;4BAAG,WAAU;sCAAoC;;;;;;sCAClD,6LAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;;8BAI/C,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAM,WAAU;sCAA8E;;;;;;sCAC/F,6LAAC;4BACG,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAA;gCAAO,QAAQ,EAAE,MAAM,CAAC,KAAK;gCAAG,SAAS;4BAAK;4BACxD,WAAW;4BACX,WAAU;;;;;;;;;;;;8BAKlB,6LAAC,uMAAM,CAAC,MAAM;oBACV,UAAU;wBAAE,OAAO;oBAAK;oBACxB,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,wBACG,6LAAC;wBAAK,WAAU;;0CACZ,6LAAC,+NAAO;gCAAC,MAAM;gCAAI,WAAU;;;;;;4BAAiB;;;;;;mEAGlD;;;;;;8BAIR,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAK,WAAU;sCAAkE;;;;;;sCAClF,6LAAC;4BAAI,WAAU;;;;;;;;;;;;8BAInB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BACG,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAA;gCAAO,eAAe,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;gCAAK,SAAS;4BAAK;4BAC7E,WAAW;4BACX,WAAU;;;;;;sCAEd,6LAAC,uMAAM,CAAC,MAAM;4BACV,UAAU;gCAAE,OAAO;4BAAK;4BACxB,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,wBAAU,6LAAC,+NAAO;gCAAC,MAAM;gCAAI,WAAU;;;;;2EAAoB;;;;;;;;;;;;8BAKpE,6LAAC,+MAAe;8BACX,uBACG,6LAAC,uMAAM,CAAC,CAAC;wBACL,SAAS;4BAAE,SAAS;4BAAG,GAAG,CAAC;wBAAE;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,MAAM;4BAAE,SAAS;wBAAE;wBACnB,WAAU;kCAET;;;;;;;;;;;;;;;;;;;;;;AAS7B;GA5Pa;;QACuB,+HAAY;;;KADnC"}},
    {"offset": {"line": 1651, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/components/game/PvPArena.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useGameStore } from '@/lib/store';\r\nimport { subscribeToRoom, subscribeToPlayers } from '@/lib/firebase/rooms';\r\nimport { Board } from './Board';\r\nimport { GameControls } from './GameControls';\r\nimport { Numpad } from './Numpad';\r\nimport { Timer } from './Timer';\r\nimport { Users, Trophy, XCircle } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport const PvPArena = () => {\r\n    const {\r\n        difficulty,\r\n        status,\r\n        opponentName,\r\n        opponentProgress,\r\n        mistakes,\r\n        startGame,\r\n        mode,\r\n        opponentStatus,\r\n        roomId,\r\n        playerId,\r\n        setMultiplayerState\r\n    } = useGameStore();\r\n\r\n    const [isConnected, setIsConnected] = useState(false);\r\n\r\n    // Effect to handle game over states\r\n    useEffect(() => {\r\n        if (opponentStatus === 'won' && status !== 'lost' && status !== 'won') {\r\n            // Opponent won, so we lost\r\n            useGameStore.setState({ status: 'lost' });\r\n        }\r\n    }, [opponentStatus, status]);\r\n\r\n    // Effect to subscribe to room updates (for opponent progress/status)\r\n    useEffect(() => {\r\n        if (!roomId || !playerId) return;\r\n\r\n        // Subscribe to players (for online status/mistakes)\r\n        const unsubPlayers = subscribeToPlayers(roomId, (players) => {\r\n            setIsConnected(true);\r\n            const opponent = Object.values(players || {}).find((p: any) => p.name !== playerId) as any;\r\n            if (opponent) {\r\n                setMultiplayerState({\r\n                    opponentName: opponent.name,\r\n                    opponentProgress: opponent.progress,\r\n                    opponentStatus: opponent.status\r\n                });\r\n            }\r\n        });\r\n\r\n        // Subscribe to SHARED BOARD (Co-op)\r\n        import('@/lib/firebase/rooms').then(({ subscribeToBoard }) => {\r\n            subscribeToBoard(roomId, (remoteBoard) => {\r\n                if (remoteBoard) {\r\n                    useGameStore.getState().setRemoteBoard(remoteBoard);\r\n                }\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            unsubPlayers();\r\n        };\r\n    }, [roomId, playerId, setMultiplayerState]);\r\n\r\n    return (\r\n        <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 w-full max-w-7xl h-dvh p-2 overflow-hidden select-none touch-none\">\r\n\r\n            {/* Left/Top: Header & Board - Flex Grow */}\r\n            <div className=\"flex flex-col gap-2 items-center justify-center w-full md:flex-1 min-h-0 min-w-0 max-w-2xl pt-2\">\r\n\r\n                {/* Header - PvP Specific - Compact & Unified */}\r\n                <div className=\"flex w-full justify-between items-center text-slate-500 font-medium px-2 z-10 shrink-0 gap-2\">\r\n                    {/* Status Pill with Opponent Info */}\r\n                    <div className=\"flex items-center gap-2 bg-white/80 backdrop-blur px-3 py-1.5 rounded-full border border-slate-200 shadow-sm grow-0 shrink overflow-hidden max-w-[70%]\">\r\n                        <div className=\"shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-indigo-100 text-indigo-600\">\r\n                            <Users size={14} />\r\n                        </div>\r\n                        <div className=\"flex flex-col leading-none truncate\">\r\n                            <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-wider\">VS</span>\r\n                            <div className=\"flex items-center gap-1.5 truncate\">\r\n                                <span className=\"text-xs sm:text-sm font-bold text-slate-700 truncate\">{opponentName || 'Opponent'}</span>\r\n                                <span className={`text-[10px] sm:text-xs font-mono font-bold ${opponentProgress > 50 ? 'text-indigo-600' : 'text-slate-400'}`}>\r\n                                    {opponentProgress}%\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div className={`shrink-0 w-2 h-2 rounded-full ml-1 ${isConnected ? 'bg-emerald-500 animate-pulse' : 'bg-slate-300'}`} title={isConnected ? \"Live Sync Active\" : \"Connecting...\"} />\r\n                    </div>\r\n\r\n                    {/* Timer */}\r\n                    <div className=\"text-xl sm:text-2xl font-bold text-slate-800 font-mono bg-white px-3 py-1 rounded-lg border border-slate-100 shadow-sm shrink-0\">\r\n                        <Timer />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Game Board Container - Strict constraints */}\r\n                <div className=\"relative w-full aspect-square flex-1 min-h-0 flex justify-center items-center py-2\">\r\n                    <div className=\"h-full w-full max-w-full aspect-square flex items-center justify-center\">\r\n                        <Board />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side: Controls - Fixed width Desktop, Dynamic Mobile */}\r\n            <div className=\"flex flex-col gap-2 w-full md:w-80 md:h-full md:justify-center shrink-0\">\r\n\r\n                {/* Stats Row */}\r\n                <div className=\"flex justify-between items-center text-slate-600 font-medium px-4 py-1\">\r\n                    <div className=\"flex flex-col\">\r\n                        <span className=\"text-[10px] uppercase tracking-wider text-slate-400 font-bold\">Mistakes</span>\r\n                        <div className=\"flex items-baseline gap-1\">\r\n                            <span className={`text-2xl font-light ${mistakes >= 3 ? 'text-rose-500' : 'text-slate-800'}`}>\r\n                                {mistakes}\r\n                            </span>\r\n                            <span className=\"text-xs text-slate-300 font-bold\">/3</span>\r\n                        </div>\r\n                    </div>\r\n                    {/* Status Badge */}\r\n                    <div className=\"flex flex-col items-end\">\r\n                        <span className=\"text-[10px] uppercase tracking-wider text-slate-400 font-bold\">Status</span>\r\n                        <span className=\"text-xs font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full\">\r\n                            PLAYING\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"scale-90 origin-center md:scale-100\">\r\n                    <GameControls />\r\n                </div>\r\n\r\n                {/* Numpad */}\r\n                <div className=\"w-full\">\r\n                    <Numpad />\r\n                </div>\r\n\r\n                {/* Surrender / Leave Button */}\r\n                <button\r\n                    onClick={() => {\r\n                        useGameStore.getState().setMultiplayerState({ mode: 'single', status: 'idle', roomId: null });\r\n                    }}\r\n                    className=\"w-full py-3 bg-slate-100 text-slate-500 hover:text-rose-500 hover:bg-rose-50 border border-slate-200 hover:border-rose-200 rounded-lg text-sm font-bold transition-all active:scale-95 tracking-wide flex items-center justify-center gap-2 mt-auto md:mt-4\"\r\n                >\r\n                    <XCircle size={18} />\r\n                    Leave\r\n                </button>\r\n            </div>\r\n\r\n            {/* Game Over / Win Overlay */}\r\n            <AnimatePresence>\r\n                {(status === 'won' || status === 'lost') && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            className=\"bg-white p-12 rounded-3xl shadow-2xl max-w-md w-full text-center border border-slate-100 relative overflow-hidden\"\r\n                        >\r\n                            {/* Background decoration */}\r\n                            <div className={`absolute top-0 left-0 w-full h-2 ${status === 'won' ? 'bg-gradient-to-r from-indigo-400 to-cyan-400' : 'bg-gradient-to-r from-rose-500 to-orange-500'}`} />\r\n\r\n                            <div className={`w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center ${status === 'won' ? 'bg-indigo-50 text-indigo-600' : 'bg-rose-50 text-rose-500'}`}>\r\n                                {status === 'won' ? <Trophy size={40} /> : <XCircle size={40} />}\r\n                            </div>\r\n\r\n                            <h2 className={`text-4xl font-black mb-2 ${status === 'won' ? 'text-slate-800' : 'text-slate-800'}`}>\r\n                                {status === 'won' ? 'Victory!' : 'Defeat'}\r\n                            </h2>\r\n                            <p className=\"text-slate-500 font-medium mb-8\">\r\n                                {status === 'won'\r\n                                    ? `You crushed it! ${opponentName} didn't stand a chance.`\r\n                                    : `${opponentName} solved it first. Better luck next time!`}\r\n                            </p>\r\n\r\n                            <button\r\n                                onClick={() => useGameStore.getState().setMultiplayerState({ mode: 'pvp', status: 'idle', roomId: null })}\r\n                                className={`w-full py-4 rounded-xl font-bold text-lg transition-all shadow-lg active:scale-95 ${status === 'won'\r\n                                    ? 'bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200'\r\n                                    : 'bg-slate-900 text-white hover:bg-slate-800 shadow-slate-300'\r\n                                    }`}\r\n                            >\r\n                                Back to Lobby\r\n                            </button>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MAHARSHI%20NATH/OneDrive/Documents/sudoku/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Board } from \"@/components/game/Board\";\nimport { GameControls } from \"@/components/game/GameControls\";\nimport { Numpad } from \"@/components/game/Numpad\";\nimport { Timer } from \"@/components/game/Timer\";\nimport { HintToast } from \"@/components/game/HintToast\";\nimport { Lobby } from \"@/components/layout/Lobby\";\nimport { PvPArena } from \"@/components/game/PvPArena\";\nimport { useGameStore } from \"@/lib/store\";\nimport { useEffect } from \"react\";\nimport { Users, User } from 'lucide-react';\n\nexport default function Home() {\n  const startGame = useGameStore(state => state.startGame);\n  const difficulty = useGameStore(state => state.difficulty);\n  const status = useGameStore(state => state.status);\n  const mode = useGameStore(state => state.mode);\n  const setMultiplayerState = useGameStore(state => state.setMultiplayerState);\n  const mistakes = useGameStore(state => state.mistakes);\n  const tickTimer = useGameStore(state => state.tickTimer);\n\n  useEffect(() => {\n    // Start single player by default only if not already set\n    if (status === 'idle' && mode === 'single') {\n      startGame(difficulty);\n    }\n  }, [status, mode, startGame, difficulty]);\n\n  // Centralized Timer Logic\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (status === 'playing') {\n      interval = setInterval(() => {\n        tickTimer();\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [status, tickTimer]);\n\n  return (\n    <main className=\"flex h-dvh flex-col items-center justify-center p-2 lg:p-4 bg-slate-50 font-sans transition-colors overflow-hidden select-none touch-none\">\n\n      {/* Hint Toast */}\n      <HintToast />\n\n      {/* Sidebar / Mode Selection - Compact on Mobile */}\n      <div className=\"absolute top-2 left-2 lg:top-4 lg:left-4 flex gap-2 z-50 scale-75 lg:scale-100 origin-top-left\">\n        <button\n          onClick={() => startGame('Medium', 'single')}\n          className={`flex items-center gap-2 px-4 py-2 rounded-full transition-colors border ${mode === 'single' ? 'bg-slate-800 text-white border-slate-800' : 'bg-white text-slate-700 border-slate-200 shadow-sm'}`}\n        >\n          <User size={18} />\n          <span className=\"hidden sm:inline font-medium\">Single</span>\n        </button>\n        <button\n          onClick={() => setMultiplayerState({ mode: 'pvp', status: 'idle' })}\n          className={`flex items-center gap-2 px-4 py-2 rounded-full transition-colors border ${mode === 'pvp' ? 'bg-indigo-600 text-white border-indigo-600' : 'bg-white text-slate-700 border-slate-200 shadow-sm'}`}\n        >\n          <Users size={18} />\n          <span className=\"hidden sm:inline font-medium\">PvP</span>\n        </button>\n      </div>\n\n      {mode === 'pvp' ? (\n        // PvP Mode: Show Lobby or Arena\n        (status === 'idle' || status === 'waiting') ? (\n          <Lobby />\n        ) : (\n          <PvPArena />\n        )\n      ) : (\n        // Single Player Mode\n        <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 w-full max-w-7xl h-full p-2 overflow-hidden\">\n\n          {/* Left/Top: Header & Board - Flex Grow to take available space */}\n          <div className=\"flex flex-col gap-2 items-center justify-center w-full md:flex-1 min-h-0 min-w-0 max-w-2xl\">\n            {/* Top Bar with Difficulty */}\n            <div className=\"flex w-full justify-between items-center text-slate-500 font-medium px-2 shrink-0\">\n              <div className=\"flex gap-1 sm:gap-2 text-xs sm:text-sm\">\n                {(['Easy', 'Medium', 'Hard', 'Expert'] as const).map(diff => (\n                  <button\n                    key={diff}\n                    onClick={() => startGame(diff, 'single')}\n                    className={`px-2 py-1 rounded-md transition-colors ${difficulty === diff ? 'text-indigo-600 font-bold bg-indigo-50' : 'hover:text-indigo-600'}`}\n                  >\n                    {diff}\n                  </button>\n                ))}\n              </div>\n              <div className=\"text-2xl sm:text-3xl font-bold text-slate-800 font-mono\">\n                <Timer />\n              </div>\n            </div>\n\n            {/* Game Board Container - Strict constraints to prevent overflow */}\n            <div className=\"relative w-full aspect-square flex-1 min-h-0 flex justify-center items-center py-2\">\n              {/* Board Wrapper - Ensure it doesn't exceed parent height OR width */}\n              <div className=\"h-full w-full max-w-full aspect-square flex items-center justify-center\">\n                <Board />\n              </div>\n            </div>\n          </div>\n\n          {/* Right Side: Controls - Fixed width on Desktop, Bottom on Mobile */}\n          <div className=\"flex flex-col gap-2 w-full md:w-80 md:h-full md:justify-center shrink-0\">\n\n            {/* Stats Row */}\n            <div className=\"flex justify-between items-center text-slate-600 font-medium px-4 py-1\">\n              <div className=\"flex flex-col items-start\">\n                <span className=\"text-[10px] uppercase tracking-wider text-slate-400 font-bold\">Mistakes</span>\n                <span className={`text-2xl font-light ${mistakes >= 3 ? 'text-red-500' : 'text-slate-800'}`}>\n                  {status === 'playing' ? `${mistakes}/3` : '-/-'}\n                </span>\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"scale-90 origin-center md:scale-100\">\n              <GameControls />\n            </div>\n\n            {/* Numpad */}\n            <div className=\"w-full\">\n              <Numpad />\n            </div>\n\n            {/* New Game Button */}\n            <button\n              onClick={() => startGame(difficulty, mode)}\n              className=\"w-full py-3 bg-slate-900 text-white rounded-xl text-sm sm:text-lg font-bold shadow-lg hover:bg-slate-800 transition-all active:scale-95 tracking-wide mt-auto md:mt-4\"\n            >\n              {status === 'playing' ? 'Restart' : 'New Game'}\n            </button>\n          </div>\n\n          {/* Game Over / Win Overlay */}\n          {(status === 'won' || status === 'lost') && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-md p-4 animate-in fade-in duration-300\">\n              <div className=\"bg-white p-12 rounded-3xl shadow-2xl max-w-md w-full text-center border border-slate-100\">\n                <h2 className={`text-5xl font-black mb-6 ${status === 'won' ? 'text-indigo-600' : 'text-rose-500'}`}>\n                  {status === 'won' ? 'Solved!' : 'Failed'}\n                </h2>\n                <p className=\"text-slate-500 text-lg mb-10 leading-relaxed\">\n                  {status === 'won'\n                    ? `Congratulations! You've mastered the ${difficulty} board.`\n                    : \"Don't give up. The numbers are waiting for you.\"}\n                </p>\n                <button\n                  onClick={() => startGame(difficulty, mode)}\n                  className=\"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-xl hover:bg-indigo-700 hover:scale-[1.02] transition-all shadow-xl shadow-indigo-200\"\n                >\n                  Play Again\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}