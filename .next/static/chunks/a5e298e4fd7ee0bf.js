(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10801,r=>{"use strict";var e=r.i(98183);r.i(1465);var t=r.i(34991);let a=async(r,a,o)=>{if(!e.db)return;let i=(0,t.ref)(e.db,`leaderboard/${o}`),s=(0,t.push)(i);await (0,t.set)(s,{name:r,time:a,difficulty:o,createdAt:Date.now()})},o=async r=>{if(!e.db)return[];let a=(0,t.ref)(e.db,`leaderboard/${r}`),o=(0,t.query)(a,(0,t.orderByChild)("time"),(0,t.limitToFirst)(10)),i=await (0,t.get)(o);if(!i.exists())return[];let s=[];return i.forEach(r=>{s.push({id:r.key,...r.val()})}),s};r.s(["addScore",0,a,"getLeaderboard",0,o])},29035,63753,r=>{"use strict";var e=r.i(98183);r.i(1465);var t=r.i(34991);function a(r){let e=Array.from({length:9},()=>Array(9).fill(0));!function r(e,t=!1){for(let a=0;a<9;a++)for(let o=0;o<9;o++)if(0===e[a][o]){let i=[1,2,3,4,5,6,7,8,9];if(t)for(let r=i.length-1;r>0;r--){let e=Math.floor(Math.random()*(r+1));[i[r],i[e]]=[i[e],i[r]]}for(let s of i)if(function(r,e,t,a){for(let o=0;o<9;o++){if(r[e][o]===a&&o!==t||r[o][t]===a&&o!==e)return!1;let i=3*Math.floor(e/3)+Math.floor(o/3),s=3*Math.floor(t/3)+o%3;if(r[i][s]===a&&(i!==e||s!==t))return!1}return!0}(e,a,o,s)){if(e[a][o]=s,r(e,t))return!0;e[a][o]=0}return!1}return!0}(e,!0);let t=e.map(r=>[...r]),a="Easy"===r?30:"Medium"===r?45:"Hard"===r?55:60;for(;a>0;){let r=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());for(;0===t[r][e];)r=Math.floor(9*Math.random()),e=Math.floor(9*Math.random());t[r][e]=0,a--}return{initial:t,solved:e}}r.s(["BLANK",0,0,"GRID_SIZE",0,9,"generateSudoku",()=>a],63753);let o=()=>{if(!e.db)throw Error("Firebase database is not initialized");return e.db},i=async(r,e)=>{let i="",s=0;for(;s<5;){console.log("Checking Room ID:",i=function(){let r="ABCDEFGHJKMNPQRSTUVWXYZ23456789",e="";for(let t=0;t<6;t++)e+=r[Math.floor(Math.random()*r.length)];return e}());try{let r=(0,t.ref)(o(),`rooms/${i}`);if(!(await (0,t.get)(r)).exists())break}catch(r){throw console.error("Error accessing Firebase:",r),r}s++}let{initial:n,solved:l}=a(e);return await (0,t.set)((0,t.ref)(o(),`rooms/${i}`),{id:i,status:"waiting",difficulty:e,initialBoard:n,solvedBoard:l,players:{[r]:{name:r,progress:0,mistakes:0,status:"playing"}},winner:null,createdAt:Date.now()}),i},s=async(r,e)=>{let a=(0,t.ref)(o(),`rooms/${r}`),i=await (0,t.get)(a);if(!i.exists())throw Error("Room not found. Check the code and try again.");let s=i.val();if("waiting"!==s.status)throw Error("This game has already started.");let n=Object.keys(s.players||{});if(n.includes(e))throw Error("That name is already taken in this room.");await (0,t.update)((0,t.ref)(o(),`rooms/${r}/players/${e}`),{name:e,progress:0,mistakes:0,status:"playing"}),n.length>=1&&await (0,t.update)((0,t.ref)(o(),`rooms/${r}`),{status:"playing"})},n=async(r,e,a,i,s)=>{if(await (0,t.update)((0,t.ref)(o(),`rooms/${r}/players/${e}`),{progress:a,mistakes:i,status:s}),"won"===s){let a=(0,t.ref)(o(),`rooms/${r}`),i=await (0,t.get)(a);i.val()&&!i.val().winner&&await (0,t.update)(a,{winner:e,status:"finished"})}};r.s(["createRoom",0,i,"joinRoom",0,s,"subscribeToRoom",0,(r,e)=>{let a=(0,t.ref)(o(),`rooms/${r}`);return(0,t.onValue)(a,r=>{let t=r.val();t&&e(t)})},"updateProgress",0,n],29035)},60271,r=>{r.v(r=>Promise.resolve().then(()=>r(29035)))},26199,r=>{r.v(r=>Promise.resolve().then(()=>r(10801)))}]);